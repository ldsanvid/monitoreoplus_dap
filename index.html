<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Monitoreo + // DAP</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg: #ffffff;
      --card: rgba(0,0,0,.03);
      --border: rgba(0,0,0,.12);
      --text: #2B2B2B;
      --muted: #6b6b6b;

      --brand: #D1006F;      /* Magenta DAP */
      --brand-2: #E53B8C;    /* Variante para acentos */
      --success: #D1006F;
      --danger: #ff5a5a;
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      font-family:'Montserrat',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--text);
      background:#f6f6f6;
      overflow-x: hidden;
    }

    header{
      position:fixed;
      inset:0 0 auto 0;
      height:64px;
      z-index:1000;
      display:flex;
      align-items:center;
      gap:20px;
      padding:0 20px;
      backdrop-filter:saturate(140%) blur(10px);
      background:rgba(209, 4, 117, 1); /* Magenta DAP */
      border-bottom:1px solid rgba(0,0,0,0.1);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:14px;
      font-weight:700;
      letter-spacing:.3px;
      color:var(--bg);
    }

    nav{
      margin-left:auto;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }

    nav a{
      color:var(--bg);
      text-decoration:none;
      font-weight:600;
      font-size:.95rem;
      padding:8px 12px;
      border:1px solid transparent;
      border-radius:10px;
      transition:.2s ease;
    }

    nav a:hover{
      border-color:rgba(255,255,255,0.6);
      background:var(--brand-2);
    }

    main{
      max-width:1100px;
      margin:96px auto 48px;
      padding:0 20px;
      background:transparent;
    }

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      padding:20px;
      background-color:#fff;
    }

    h2,h3{margin:0 0 14px}
    h2{
      font-size:1.4rem;
      font-weight:700;
      color:var(--success);
    }
    h3{
      font-size:1.15rem;
      font-weight:700;
      color:var(--success);
    }

    p{
      color:var(--muted);
      line-height:1.7;
      text-align:justify;
    }

    .row{display:grid; gap:14px}

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    select,
    input[type="text"],
    input[type="email"],
    button{
      background:rgba(0,0,0,.02);
      color:var(--text);
      border:1px solid var(--border);
      border-radius:12px;
      padding:12px 18px;
      font:inherit;
      outline:none;
      transition:.2s ease;
      width:100%;
    }

    @media(min-width:600px){
      select,
      input[type="text"],
      input[type="email"]{
        width:420px;
        min-width:420px;
      }
    }

    button{
      cursor:pointer;
      font-weight:700;
    }

    .btn-primary{
      background:linear-gradient(180deg,var(--brand-2),var(--brand));
      color:#fff;
      border:none;
    }

    .btn-primary:hover{
      filter:brightness(1.05);
    }

    .summary{
      white-space:pre-line;
      text-align:justify;
    }

    .chips{
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .chip{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      background:rgba(0,0,0,.03);
      border:1px solid var(--border);
      border-radius:12px;
    }

    .chip a{
      color:var(--success);
      text-decoration:none;
      font-weight:600;
    }

    .chip a:hover{
      text-decoration:underline;
    }

    .chip small{
      color:var(--muted);
    }

    .hidden{display:none}
    .muted{color:var(--muted)}

    .loading{
      background:linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 37%, #f0f0f0 63%);
      background-size:400% 100%;
      animation:shimmer 1.4s ease infinite;
      border-radius:4px;
    }

    .loading::after{
      content:attr(data-label);
      display:block;
      margin-top:8px;
      color:var(--muted);
      font-style:italic;
    }

    @keyframes shimmer{
      0% { background-position:-400px 0; }
      100%{ background-position:400px 0; }
    }

    /* üì± Ajustes m√≥viles */
    @media (max-width: 600px) {
      header{
        flex-direction:column;
        height:auto;
        padding:10px;
      }

      nav{
        margin-left:0;
        flex-wrap:wrap;
        justify-content:center;
      }

      nav a{
        font-size:0.85rem;
        padding:6px 8px;
      }

      main{
        margin:80px auto 20px;
        padding:10px;
      }

      .card{
        padding:14px;
      }

      button,
      select,
      input[type="text"],
      input[type="email"]{
        width:100% !important;
        min-width:unset;
      }

      .summary,
      #resumenNoticias,
      #respuestaTexto,
      #resumenDO{
        text-align:left !important;
        overflow-wrap:anywhere;
        word-break:break-word;
        hyphens:auto;
      }

      html, body{max-width:100%; overflow-x:hidden;}
      main, .card, section{max-width:100%;}

      .chip{
        flex-wrap:wrap;
        align-items:flex-start;
      }

      .chip a{
        overflow-wrap:anywhere;
        word-break:break-word;
        hyphens:auto;
        flex:1 1 100%;
      }

      .chip small{
        flex:1 1 100%;
        margin-left:0;
        white-space:normal;
      }

      .controls{
        flex-direction:column;
        align-items:stretch;
      }
    }

    /* üì± Men√∫ hamburguesa */
    .hamburger{
      display:none;
      flex-direction:column;
      cursor:pointer;
      gap:4px;
    }

    .hamburger div{
      width:25px;
      height:3px;
      background:#ffffff;
      border-radius:2px;
      transition:0.3s;
    }

    .hamburger.active div:nth-child(1){
      transform:rotate(45deg) translate(5px,5px);
    }
    .hamburger.active div:nth-child(2){
      opacity:0;
    }
    .hamburger.active div:nth-child(3){
      transform:rotate(-45deg) translate(6px,-6px);
    }

    @media (max-width: 600px){
      .hamburger{display:flex;}
      nav{
        display:none;
        flex-direction:column;
        width:100%;
        background:white;
        border-top:1px solid var(--border);
        margin-top:10px;
      }
      nav.show{display:flex;}
      nav a{
        padding:12px;
        border:none;
        border-bottom:1px solid var(--border);
        font-size:1rem;
        color:#000 !important;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <!-- Aseg√∫rate de guardar tu logo como static/logo_dap.png -->
      <img src="static/logo_dap.png"
           alt="DAP ‚Äì Despacho de Asuntos P√∫blicos"
           style="height:42px; width:auto; object-fit:contain; margin-right:4px;">
      <span>Monitoreo +</span>
    </div>

    <div class="hamburger" id="hamburger">
      <div></div><div></div><div></div>
    </div>
    <nav>
      <a href="#resumen">Agenda de medios</a>
      <a href="#diarios">Diarios Oficiales</a>
      <a href="#descarga_diarios">Descarga</a>
      <a href="#preguntas">Chatbot</a>
      <a href="#reporte">Reporte semanal</a>
      <a href="#dashboard_noticias">Dashboard</a>
    </nav>
  </header>

  <main>
    <!-- üì∞ RESUMEN DIARIO DE NOTICIAS -->
    <section id="resumen" class="card row">
      <h2>üì∞ Agenda diaria ‚Äì Monitoreo de medios</h2>
      <div class="controls">
        <select id="fechaNoticias">
          <option value="" selected>Selecciona una fecha‚Ä¶</option>
        </select>
        <button id="btnCargarNoticias" class="btn-primary">Ver resumen</button>
        <button id="btnLimpiar" type="button">Limpiar</button>
      </div>
      <div id="resumenNoticias" class="summary"></div>
      <div id="titularesNoticias" class="chips"></div>
    </section>

    <!-- üèõÔ∏è DIARIOS OFICIALES -->
    <section id="diarios" class="card row" style="margin-top:18px">
      <h2>üèõÔ∏è Resumen Diarios Oficiales y Gacetas</h2>
      <div class="controls">
        <select id="fechaDO">
          <option value="" selected>Selecciona una fecha‚Ä¶</option>
        </select>
        <select id="jurisdiccionDO">
          <option value="" selected>Selecciona una jurisdicci√≥n‚Ä¶</option>
        </select>
        <button id="btnCargarDO" class="btn-primary">Ver resumen normativo</button>
      </div>
      <div id="resumenDO" class="summary"></div>
    </section>

    <!-- üìÇ DESCARGA DE DIARIOS Y GACETAS -->
    <section id="descarga_diarios" class="card row" style="margin-top:18px">
    <h2>üìÇ Descarga de Diarios y Gacetas</h2>
    <div class="controls">
        <select id="fechaPDF">
        <option value="">Selecciona una fecha...</option>
        </select>
        <select id="jurisdiccionPDF">
        <option value="">Selecciona una jurisdicci√≥n...</option>
        </select>
        <button id="btnListarPDFs" class="btn-primary">Mostrar PDFs disponibles</button>
    </div>
    <div id="listaPDFs" class="chips"></div>
    </section>


    <!-- ü§ñ CHATBOT -->
    <section id="preguntas" class="card row" style="margin-top:18px">
      <h2>ü§ñ Chatbot</h2>
      <div class="controls">
        <input id="inputPregunta" type="text"
               placeholder="Ej. ¬øQu√© se public√≥ en el DOF sobre casinos el 15 de enero?"/> 
        <button id="btnPreguntar" class="btn-primary">Consultar</button>
      </div>
      <div id="respuestaTexto" class="summary"></div>
      <div id="titularesPregunta" class="chips"></div>
    </section>

    <!-- üìë REPORTE SEMANAL -->
    <section id="reporte" class="card row" style="margin-top:18px">
      <h2>üìë Reporte semanal</h2>
      <div id="listaReportes" class="chips"></div>
    </section>

    <!-- üìà DASHBOARD -->
    <section id="dashboard_noticias" class="card row" style="margin-top:18px">
      <h2>üìà Dashboard de noticias</h2>
      <!-- Sustituye el src por el embed de tu dashboard DAP en Tableau -->
      <iframe
        src="https://public.tableau.com/views/SF_17652944168240/Recuentodenoticiasporpersonaje?:showVizHome=no"
        style="width:100%; height:min(800px, 80vh); border:0; border-radius:14px;"
        loading="lazy"
        allowfullscreen
      ></iframe>
    </section>
  </main>

  <script>
    // Cambia esto si lo montas en Render
    var API_BASE = window.location.origin;

    var fechaNoticiasSelect   = document.getElementById('fechaNoticias');
    var resumenNoticiasDiv    = document.getElementById('resumenNoticias');
    var titularesNoticiasDiv  = document.getElementById('titularesNoticias');

    var fechaDOSelect         = document.getElementById('fechaDO');
    var jurisdiccionDOSelect  = document.getElementById('jurisdiccionDO');
    var resumenDODiv          = document.getElementById('resumenDO');

    var respuestaTextoDiv     = document.getElementById('respuestaTexto');
    var titularesPreguntaDiv  = document.getElementById('titularesPregunta');
    var listaReportesDiv      = document.getElementById('listaReportes');
    var listaPDFsDiv          = document.getElementById('listaPDFs');   
    var fechaPDFSelect        = document.getElementById('fechaPDF');        
    var jurisdiccionPDFSelect = document.getElementById('jurisdiccionPDF'); 


    // ---------- UTILIDAD: RENDER TITULARES ----------
    function renderTitulares(list, target, tituloBloque) {
      if (!list || list.length === 0) {
        target.innerHTML = '<em class="muted">No hay titulares disponibles</em>';
        return;
      }

      var html = '';
      if (tituloBloque) {
        html += '<h3>' + tituloBloque + '</h3>';
      }

      html += list.map(function(t) {
        var titulo = t.titular || t.titulo || '';
        var medio  = t.medio || '';
        var enlace = t.enlace || '#';
        return (
          '<div class="chip">' +
            'üóûÔ∏è <a href="' + enlace + '" target="_blank" rel="noopener noreferrer">' +
              titulo +
            '</a>' +
            '<small>‚Ä¢ ' + medio + '</small>' +
          '</div>'
        );
      }).join('');

      target.innerHTML = html;
    }

    // ========== NOTICIAS ==========
// ========== NOTICIAS ==========
    async function cargarFechasNoticias() {
    try {
        var r = await fetch(API_BASE + '/fechas_noticias');
        var data = await r.json();

        // El backend devuelve { fechas: [...] }
        var fechas = data.fechas || [];

        if (!Array.isArray(fechas) || fechas.length === 0) {
        fechaNoticiasSelect.innerHTML = '<option value="">No hay fechas disponibles</option>';
        return;
        }

        fechaNoticiasSelect.innerHTML =
        '<option value="">Selecciona una fecha‚Ä¶</option>' +
        fechas.map(function(f) {
            return '<option value="' + f + '">' + f + '</option>';
        }).join('');

    } catch (e) {
        console.error(e);
        fechaNoticiasSelect.innerHTML = '<option value="">Error al cargar fechas</option>';
    }
    }


    async function cargarResumenNoticias() {
      var fecha = fechaNoticiasSelect.value;
      if (!fecha) {
        alert('Selecciona una fecha');
        return;
      }

      resumenNoticiasDiv.innerHTML =
        '<div class="loading" style="width:100%;height:40px;" data-label="Procesando resumen de noticias‚Ä¶"></div>';
      titularesNoticiasDiv.innerHTML =
        '<div class="loading" style="width:100%;height:20px;" data-label="Cargando titulares‚Ä¶"></div>';

      try {
        var r = await fetch(API_BASE + '/resumen_noticias?fecha=' + encodeURIComponent(fecha));
        var data = await r.json();

        if (data.error) {
          resumenNoticiasDiv.textContent = data.error;
          titularesNoticiasDiv.innerHTML = '';
          return;
        }

        var texto = data.resumen || '';
        resumenNoticiasDiv.innerHTML = texto
          .replace(/\n\n/g, '<br><br>')
          .replace(/\n/g, '<br>');

        renderTitulares(data.titulares || [], titularesNoticiasDiv, 'üóûÔ∏è Titulares del d√≠a');

      } catch (e) {
        console.error(e);
        resumenNoticiasDiv.textContent = '‚ùå Error al cargar el resumen de noticias.';
        titularesNoticiasDiv.innerHTML = '';
      }
    }

    // ========== DIARIOS OFICIALES ==========
    async function cargarFechasDO() {
    try {
        var r = await fetch(API_BASE + '/do_fechas');
        var data = await r.json();

        // El backend devuelve { fechas: [...] }
        var fechas = data.fechas || [];

        if (!Array.isArray(fechas) || fechas.length === 0) {
        fechaDOSelect.innerHTML = '<option value="">No hay fechas disponibles</option>';
        return;
        }

        fechaDOSelect.innerHTML =
        '<option value="">Selecciona una fecha‚Ä¶</option>' +
        fechas.map(function(f) {
            return '<option value="' + f + '">' + f + '</option>';
        }).join('');

    } catch (e) {
        console.error(e);
        fechaDOSelect.innerHTML = '<option value="">Error al cargar fechas</option>';
    }
    }

    async function cargarJurisdiccionesDO() {
    var fecha = fechaDOSelect.value;
    if (!fecha) {
        jurisdiccionDOSelect.innerHTML = '<option value="">Selecciona primero una fecha</option>';
        return;
    }

    jurisdiccionDOSelect.innerHTML =
        '<option value="">Cargando jurisdicciones‚Ä¶</option>';

    try {
        var r = await fetch(API_BASE + '/do_jurisdicciones?fecha=' + encodeURIComponent(fecha));
        var data = await r.json();

        // El backend devuelve { fecha: "...", jurisdicciones: [...] }
        var jurisdicciones = data.jurisdicciones || [];

        if (!Array.isArray(jurisdicciones) || jurisdicciones.length === 0) {
        jurisdiccionDOSelect.innerHTML = '<option value="">No hay jurisdicciones para esta fecha</option>';
        return;
        }

        jurisdiccionDOSelect.innerHTML =
        '<option value="">Selecciona una jurisdicci√≥n‚Ä¶</option>' +
        jurisdicciones.map(function(j) {
            return '<option value="' + j + '">' + j + '</option>';
        }).join('');

    } catch (e) {
        console.error(e);
        jurisdiccionDOSelect.innerHTML = '<option value="">Error al cargar jurisdicciones</option>';
    }
    }

        // ========== FECHAS/JURISDICCIONES PARA DESCARGA DE PDFs ==========
    async function cargarFechasPDF() {
      try {
        var r = await fetch(API_BASE + '/do_fechas');
        var data = await r.json();

        var fechas = data.fechas || [];

        if (!Array.isArray(fechas) || fechas.length === 0) {
          fechaPDFSelect.innerHTML = '<option value="">No hay fechas disponibles</option>';
          return;
        }

        fechaPDFSelect.innerHTML =
          '<option value="">Selecciona una fecha...</option>' +
          fechas.map(function (f) {
            return '<option value="' + f + '">' + f + '</option>';
          }).join('');

      } catch (e) {
        console.error(e);
        fechaPDFSelect.innerHTML = '<option value="">Error al cargar fechas</option>';
      }
    }

    async function cargarJurisdiccionesPDF() {
      var fecha = fechaPDFSelect.value;
      if (!fecha) {
        jurisdiccionPDFSelect.innerHTML = '<option value="">Selecciona primero una fecha</option>';
        return;
      }

      jurisdiccionPDFSelect.innerHTML =
        '<option value="">Cargando jurisdicciones...</option>';

      try {
        var r = await fetch(API_BASE + '/do_jurisdicciones?fecha=' + encodeURIComponent(fecha));
        var data = await r.json();

        var jurisdicciones = data.jurisdicciones || [];

        if (!Array.isArray(jurisdicciones) || jurisdicciones.length === 0) {
          jurisdiccionPDFSelect.innerHTML =
            '<option value="">No hay jurisdicciones para esta fecha</option>';
          return;
        }

        jurisdiccionPDFSelect.innerHTML =
          '<option value="">Selecciona una jurisdicci√≥n...</option>' +
          jurisdicciones.map(function (j) {
            return '<option value="' + j + '">' + j + '</option>';
          }).join('');

      } catch (e) {
        console.error(e);
        jurisdiccionPDFSelect.innerHTML =
          '<option value="">Error al cargar jurisdicciones</option>';
      }
    }

// ========== RESUMEN NORMATIVO (SECCI√ìN DIARIOS) ==========
async function cargarResumenDO() {
  // üëá aqu√≠ usamos los selects de la secci√≥n de RESUMEN, NO los de descarga
  var fecha = fechaDOSelect.value;
  var jurisdiccion = jurisdiccionDOSelect.value;

  if (!fecha || !jurisdiccion) {
    alert('Selecciona fecha y jurisdicci√≥n');
    return;
  }

  // skeleton de carga
  resumenDODiv.innerHTML =
    '<div class="loading" style="width:100%;height:40px;" data-label="Procesando resumen normativo‚Ä¶"></div>';

  try {
    var r = await fetch(
      API_BASE + '/resumen_diarios?fecha=' +
      encodeURIComponent(fecha) +
      '&jurisdiccion=' +
      encodeURIComponent(jurisdiccion)
    );
    var data = await r.json();

    if (data.error) {
      resumenDODiv.textContent = data.error;
      return;
    }

    var texto = data.resumen || '';
    resumenDODiv.innerHTML = texto
      .replace(/\n\n/g, '<br><br>')
      .replace(/\n/g, '<br>');

  } catch (e) {
    console.error(e);
    resumenDODiv.textContent = '‚ùå Error al cargar el resumen normativo.';
  }
}

// ========== LISTA DE PDFs DE DIARIOS (SECCI√ìN DESCARGA) ==========
    async function cargarPDFsDO() {
    // üëá AHORA usamos SOLO los selects de la secci√≥n de Descarga
    var fecha = fechaPDFSelect.value;
    var jurisdiccion = jurisdiccionPDFSelect.value;

    if (!fecha || !jurisdiccion) {
        alert('Selecciona fecha y jurisdicci√≥n en la secci√≥n de Descarga de Diarios.');
        return;
    }

    listaPDFsDiv.innerHTML =
        '<div class="loading" style="width:100%;height:20px;" data-label="Cargando PDFs disponibles‚Ä¶"></div>';

    try {
        var r = await fetch(
        API_BASE + '/do_pdfs?fecha=' +
        encodeURIComponent(fecha) +
        '&jurisdiccion=' +
        encodeURIComponent(jurisdiccion)
        );
        var data = await r.json();

        var docs = data.documentos || [];

        if (!Array.isArray(docs) || docs.length === 0) {
        listaPDFsDiv.innerHTML =
            '<em class="muted">No se encontraron PDFs para esa combinaci√≥n de fecha y jurisdicci√≥n.</em>';
        return;
        }

        listaPDFsDiv.innerHTML = docs.map(function (d) {
        var nombre = d.nombre || d.id || 'Documento PDF';
        var url    = d.url || '#';
        return (
            '<div class="chip">' +
            'üìÑ <a href="' + API_BASE + url + '" target="_blank" rel="noopener noreferrer">' +
                nombre +
            '</a>' +
            '<a href="' + API_BASE + url + '" download ' +
                'style="margin-left:10px; font-size:.9rem; color:var(--muted); text-decoration:none;">' +
                'üì• Descargar' +
            '</a>' +
            '</div>'
        );
        }).join('');

    } catch (e) {
        console.error(e);
        listaPDFsDiv.innerHTML =
        '<em class="muted">Error al cargar la lista de PDFs.</em>';
    }
    }

    // ========== CHATBOT ==========
    async function hacerPregunta() {
      var pregunta = document.getElementById('inputPregunta').value.trim();
      if (!pregunta) {
        alert('Escribe tu pregunta');
        return;
      }

      respuestaTextoDiv.innerHTML =
        '<div class="loading" style="width:100%;height:40px;" data-label="Procesando respuesta‚Ä¶"></div>';
      titularesPreguntaDiv.innerHTML =
        '<div class="loading" style="width:100%;height:20px;" data-label="Buscando titulares relevantes‚Ä¶"></div>';

      try {
        var r = await fetch(API_BASE + '/pregunta', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({ pregunta: pregunta })
        });
        var data = await r.json();

        respuestaTextoDiv.textContent = data.respuesta || '';

        var titulares = data.titulares || data.titulares_usados || [];
        if (titulares.length > 0) {
          renderTitulares(titulares, titularesPreguntaDiv, '');
        } else {
          titularesPreguntaDiv.innerHTML = '<em class="muted">No se encontraron titulares para esta pregunta.</em>';
        }

      } catch (e) {
        console.error(e);
        respuestaTextoDiv.textContent = '‚ùå Error al procesar la pregunta.';
        titularesPreguntaDiv.innerHTML = '';
      }
    }

    // ========== REPORTE SEMANAL ==========
    async function cargarReportes() {
      try {
        var r = await fetch(API_BASE + '/reporte_semanal');
        var data = await r.json();

        if (!data || data.length === 0) {
          listaReportesDiv.innerHTML = '<em class="muted">No hay reportes semanales disponibles todav√≠a.</em>';
          return;
        }

        listaReportesDiv.innerHTML = data.map(function(a) {
          var nombre = a.nombre || 'Reporte semanal';
          var url    = a.url || '';
          return (
            '<div class="chip">' +
              'üìÑ <a href="' + API_BASE + url + '" target="_blank" rel="noopener noreferrer">' +
                nombre +
              '</a>' +
              '<a href="' + API_BASE + url + '" download ' +
                 'style="margin-left:10px; font-size:.9rem; color:var(--muted); text-decoration:none;">' +
                 'üì• Descargar' +
              '</a>' +
            '</div>'
          );
        }).join('');

      } catch (e) {
        console.error(e);
        listaReportesDiv.innerHTML = '<em class="muted">Error al cargar los reportes.</em>';
      }
    }

    // ========== LIMPIAR ==========
    document.getElementById('btnLimpiar').addEventListener('click', function () {
      fechaNoticiasSelect.value    = '';
      resumenNoticiasDiv.textContent   = '';
      titularesNoticiasDiv.innerHTML   = '';
      respuestaTextoDiv.textContent    = '';
      titularesPreguntaDiv.innerHTML   = '';
      resumenDODiv.textContent         = '';
    });

    // Botones principales
    document.getElementById('btnCargarNoticias')
      .addEventListener('click', cargarResumenNoticias);
    document.getElementById('btnCargarDO')
      .addEventListener('click', cargarResumenDO);
    document.getElementById('btnPreguntar')
      .addEventListener('click', hacerPregunta);
    document.getElementById('btnListarPDFs')
      .addEventListener('click', cargarPDFsDO);   // üëà NUEVA L√çNEA

    // Cuando cambie la fecha DO, recargamos jurisdicciones
    fechaDOSelect.addEventListener('change', cargarJurisdiccionesDO);
    fechaPDFSelect.addEventListener('change', cargarJurisdiccionesPDF);


    // Men√∫ hamburguesa
    var hamburger = document.getElementById('hamburger');
    var nav = document.querySelector('header nav');
    hamburger.addEventListener('click', function () {
      nav.classList.toggle('show');
      hamburger.classList.toggle('active');
    });

    // üöÄ Al cargar la p√°gina
    cargarFechasNoticias();
    cargarFechasDO();
    cargarFechasPDF();
    cargarReportes();
  </script>
</body>
</html>
